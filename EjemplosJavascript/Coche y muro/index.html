<!DOCTYPE html>
<html>
	<head>
		<title>Coche y puerta</title>
		<meta charset="UTF-8">
		<style>
		#contenedor{
            position: absolute;
        }
		.cochecito{
			width: 320px;
			height: 150px;
			background-image:url(coche.png);
			background-size:280px 120px;
			background-repeat: no-repeat;
			position: absolute;
		}

		.muralla{
			width: 320px;
			height: 300px;
			background-image:url(muro.png);
			background-size:200px 200px;
			background-repeat: no-repeat;
			position: absolute;
		}		
		</style>
		<script>
			var coche;
			var puerta;
			var leftPuerta = 0;
			function crearCoche(){	
				coche = document.createElement("div");
				coche.id = "cochecillo"
				coche.className = "cochecito";
				coche.style.left = 30 + "px";
				coche.style.top = 400 + "px";
				document.getElementById("contenedor").appendChild(coche);	
				crearMuro();
				movimiento(coche)
			}
			
			function crearMuro(){
				muro = document.createElement("div");
				muro.setAttribute("onclick","borrarPuerta(this)");
				muro.className = "muralla";
				leftMuro = 600;
				muro.style.left = leftMuro + "px";
				muro.style.top = 350 + "px";
				document.getElementById("contenedor").appendChild(muro);	
			}
			
			function borrarPuerta(muroPiedra){
				muroPiedra.parentNode.removeChild(muroPiedra);
				leftMuro = 0;
			}
			function movimiento(miCoche){
				var posicion = miCoche.offsetLeft;
				var id = setInterval(frame, 8);
					function frame() {
						if (posicion == 1000) {
							clearInterval(id);
						} else {
							posicion++; 
							miCoche.style.left = posicion + 'px'; 
							if(posicion == leftMuro-185){
								clearInterval(id);
							}
						}
					}
			}
			
			function getRand(min, max) { //Número aleatorio entre un máximo y un mínimo.
				return Math.random() * (max - min) + min;
			}
		</script>
	</head>
	<body onload="crearCoche()">
		<div id ="contenedor">
				
		</div>
	</body>
</html> 